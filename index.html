<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rakenduse test</title>
</head>
<body>
<h1>#1 Algoritm | Kivi, paber, käärid</h1>
<h2>üks-kaks-kolm</h2>

<p><strong>Pea meeles:</strong> “Kivi võidab käärid, käärid lõikavad paberi ja paber katab kivi.” </p>
<div class='score'>

</div>
<div class='message'>

</div>
<button type='button' class='button'>Kivi</button>
<button type='button' class="button">Paber</button>
<button type='button' class="button">Käärid</button>
<script>
    const message = document.querySelector('.message');
    const score = document.querySelector('.score');
    const buttons = document.querySelectorAll('button');
    const winnerScores = [0,0];

    // Add event listeners to buttons
    for ( let i = 0 ; i < buttons.length ; i++){
        buttons[i].addEventListener('click', playGame);
    }

    function playGame(e){

        // Setup player's selection
        let playerSelection = e.target.innerText;

        // Setup a random number to select for computer
        // Selects a number between 0 and 1 (1 not-inclusive)
        let computerSelection = Math.random();

        // If computerSelection is less than .34, computer selects Kivi
        if (computerSelection < .34){
            computerSelection = 'Kivi';
        } else if (computerSelection <= .67){
            computerSelection = 'Paber';
        } else {
            computerSelection = 'Käärid';
        }

        // Setup a function to compare winners and return result
        let result = checkWinner(playerSelection, computerSelection);

        // Output scores
        if (result === 'Mängija'){
            result += ' võitis!';

            // Update score
            winnerScores[0]++;
        }

        if (result === 'Kompuuter'){
            result += ' võitis!';
            winnerScores[1]++;
        }

        if (result === 'Viik'){
            result += '. Viik!'
        }

        // Output score into Score DIV
        score.innerHTML = 'Mängija: [ ' + winnerScores[0]+ ' ] Kompuuter: [ ' + winnerScores[1] + ' ]';

        // Output player and computer's selections
        messenger('Mängija: <strong>' + playerSelection + '</strong> Kompuuter: <strong>' + computerSelection + '</strong><br>' + result);
    }

    function messenger(selectionMessage){
        message.innerHTML = selectionMessage;
    }

    // Compare the results of player and computer
    function checkWinner(player, computer){
        if (player === computer){
            return 'Viik';
        }

        if (player === 'Kivi'){
            if(computer === 'Paber'){
                return 'Kompuuter';
            } else {
                return 'Mängija';
            }
        }

        if (player === 'Paber'){
            if (computer === 'Käärid'){
                return 'Kompuuter';
            } else {
                return 'Mängija';
            }
        }

        if (player === 'Käärid'){
            if (computer === 'Kivi'){
                return 'Kompuuter';
            } else {
                return 'Mängija';
            }
        }
    }
</script>


</body>
</html>